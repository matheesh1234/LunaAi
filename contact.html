<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact Us</title>
    <!-- Use the Inter font from Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5782374845716287"
     crossorigin="anonymous"></script>
    
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .summary-box {
            display: none;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800 flex items-center justify-center min-h-screen p-4">

    <div class="max-w-xl w-full mx-auto bg-white shadow-xl rounded-2xl p-8 lg:p-12 my-8">
        <!-- Main heading -->
        <h1 class="text-3xl md:text-4xl font-bold text-center mb-4">Contact Us</h1>
        <p class="text-center text-gray-500 mb-8">We'd love to hear from you! Please feel free to reach out with any questions or feedback.</p>

        <!-- Contact Form -->
        <form class="space-y-6" id="contactForm">
            <div>
                <label for="name" class="block text-sm font-medium text-gray-700">Name</label>
                <div class="mt-1">
                    <input type="text" id="name" name="name" placeholder="John Doe" class="block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm p-2 transition-colors duration-200">
                </div>
            </div>

            <div>
                <label for="email" class="block text-sm font-medium text-gray-700">Email Address</label>
                <div class="mt-1">
                    <input type="email" id="email" name="email" placeholder="you@example.com" class="block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm p-2 transition-colors duration-200">
                </div>
            </div>

            <div>
                <label for="message" class="block text-sm font-medium text-gray-700">Message</label>
                <div class="mt-1">
                    <textarea id="message" name="message" rows="4" placeholder="Your message here..." class="block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm p-2 transition-colors duration-200"></textarea>
                </div>
            </div>

            <!-- Gemini API feature: Summarize Message -->
            <div class="space-y-4 pt-4">
                <button type="button" id="summarizeBtn" class="w-full flex justify-center items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors duration-200">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-4 h-4 mr-2">
                        <path d="M5.85 3.5a.75.75 0 00-1.117-1 9.719 9.719 0 00-4.148 5.76.75.75 0 001.458.217A8.225 8.225 0 015.85 3.5zM12 3a9 9 0 00-9 9 .75.75 0 001.5 0 7.5 7.5 0 0115 0 .75.75 0 001.5 0A9 9 0 0012 3zM18.148 7.21a.75.75 0 001.458-.218 9.719 9.719 0 00-4.148-5.759.75.75 0 10-1.117 1 8.225 8.225 0 013.807 4.977zM16.5 12a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM12 4.5a7.5 7.5 0 00-7.466 7.026.75.75 0 001.481.148A6.004 6.004 0 0112 6a6 6 0 016 6.015.75.75 0 001.48-.148A7.5 7.5 0 0012 4.5z" />
                    </svg>
                    âœ¨ Summarize Message
                </button>
                <div id="summaryContainer" class="summary-box mt-4 p-4 bg-gray-50 border border-gray-200 rounded-md">
                    <p class="font-medium text-gray-700 mb-2">Message Summary:</p>
                    <div id="summaryContent" class="text-gray-600 italic"></div>
                    <div id="summaryLoading" class="hidden text-gray-500 text-center">
                        <svg class="animate-spin h-5 w-5 text-blue-500 mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                        </svg>
                    </div>
                </div>
            </div>

            <div class="pt-4">
                <button type="submit" class="w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200">
                    Send Message
                </button>
            </div>
        </form>

        <hr class="my-8 border-gray-200">

        <!-- Additional contact information -->
        <div class="text-center">
            <h2 class="text-xl font-bold mb-2">Other Ways to Contact Us</h2>
            <p class="mb-2">
                <strong>Email:</strong> <a href="mailto:mproductionsofficial089@gmail.com" class="text-blue-600 hover:underline">mproductionsofficial089@gmail.com</a>
            </p>
            <p>
                <strong>Address:</strong> <span class="text-gray-600">Kongolla Waththa, Hindagolla, Kurunegala</span>
            </p>
        </div>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const summarizeBtn = document.getElementById('summarizeBtn');
            const messageTextarea = document.getElementById('message');
            const summaryContainer = document.getElementById('summaryContainer');
            const summaryContent = document.getElementById('summaryContent');
            const summaryLoading = document.getElementById('summaryLoading');

            summarizeBtn.addEventListener('click', async () => {
                const message = messageTextarea.value.trim();
                if (message === '') {
                    summaryContent.textContent = 'Please enter a message to summarize.';
                    summaryContainer.style.display = 'block';
                    return;
                }

                // Show loading indicator and clear previous summary
                summaryContainer.style.display = 'block';
                summaryContent.textContent = '';
                summaryLoading.style.display = 'block';

                const prompt = `Please provide a concise summary of the following message:\n\n"${message}"`;
                let chatHistory = [];
                chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                const payload = { contents: chatHistory };
                
                const apiKey = "";
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

                // Implement a retry mechanism with exponential backoff
                const maxRetries = 5;
                let retryCount = 0;
                let delay = 1000;

                while (retryCount < maxRetries) {
                    try {
                        const response = await fetch(apiUrl, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(payload)
                        });
                        
                        if (response.status === 429) { // Too Many Requests
                            console.log(`Rate limit exceeded. Retrying in ${delay / 1000} seconds...`);
                            await new Promise(resolve => setTimeout(resolve, delay));
                            delay *= 2; // Exponential backoff
                            retryCount++;
                            continue;
                        }

                        if (!response.ok) {
                            throw new Error(`API error: ${response.statusText}`);
                        }

                        const result = await response.json();
                        const text = result?.candidates?.[0]?.content?.parts?.[0]?.text || 'Could not generate a summary.';
                        
                        summaryContent.textContent = text;
                        summaryLoading.style.display = 'none';
                        break; // Exit the loop on success

                    } catch (error) {
                        summaryContent.textContent = `Error: ${error.message}`;
                        summaryLoading.style.display = 'none';
                        break; // Exit the loop on error
                    }
                }
            });
        });
    </script>

</body>
</html>


